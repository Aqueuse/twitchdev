<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="refresh" content="300">
    <meta charset="UTF-8">
    <link rel= "stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <title>Twitch Dev Now</title>
</head>
<body style="background-color:#1B1D48">

<script>
    var twitchLogoPurpleParts = document.getElementsByClassName("logoPurple");
    var twitchLogoWhiteParts = document.getElementsByClassName("logoWhite");

   if (localStorage.getItem("backgroundActivated") == null) {
        localStorage.setItem("backgroundActivated", "True");
   }

   function showHideBackground() {
        if (localStorage.getItem("backgroundActivated") === "True") {
            localStorage.setItem("backgroundActivated", "False");
            document.body.style.backgroundColor = "transparent";

            // twitch logo ninjafication
            for (var i = 0; i < twitchLogoPurpleParts.length; i++) {
                twitchLogoPurpleParts.item(i).style.fill = "#9146ff2b";
            }
            twitchLogoWhiteParts.item(0).style.fill = "#ffffff57";
            return;
        }
        if (localStorage.getItem("backgroundActivated") === "False") {
            localStorage.setItem("backgroundActivated", "True");
            document.body.style.backgroundColor = "#1B1D48";

            // twitch logo uninjafication
            for (var i = 0; i < twitchLogoPurpleParts.length; i++) {
                twitchLogoPurpleParts.item(i).style.fill = "#9146FF";
            }
            twitchLogoWhiteParts.item(0).style.fill = "#ffffff";
            return;
        }
   }

   window.onload = function() {
     let backgroundActivated = localStorage.getItem("backgroundActivated");
     if (localStorage.getItem("backgroundActivated") === "True") {
        document.body.style.backgroundColor = "#1B1D48";

       // twitch logo uninjafication
        for (var i = 0; i < twitchLogoPurpleParts.length; i++) {
            twitchLogoPurpleParts.item(i).style.fill = "#9146FF";
        }
        twitchLogoWhiteParts.item(0).style.fill = "#ffffff";
        return;
     }
     if (localStorage.getItem("backgroundActivated") === "False") {
        document.body.style.backgroundColor = "transparent";

        // twitch logo ninjafication
        for (var i = 0; i < twitchLogoPurpleParts.length; i++) {
            twitchLogoPurpleParts.item(i).style.fill = "#9146ff2b";
        }
        twitchLogoWhiteParts.item(0).style.fill = "#ffffff";
        return;
     }
  }
</script>

<div class="switchContainer">
    <span class="twitchLogo" onclick="showHideBackground()">
        <?xml version="1.0" encoding="utf-8"?>
    <!-- Generator: Adobe Illustrator 23.0.6, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
         viewBox="0 0 2400 2800" style="enable-background:new 0 0 2400 2800;" xml:space="preserve">
        <style type="text/css">
            .logoWhite{
                fill:#FFFFFF;
            }
            .logoPurple{
                fill:#9146FF;
            }
        </style>
        <title>Desactivate background for streaming integration</title>
        <g>
            <polygon class="logoWhite" points="2200,1300 1800,1700 1400,1700 1050,2050 1050,1700 600,1700 600,200 2200,200 	"/>
            <g>
                <g id="Layer_1-2">
                    <path class="logoPurple" d="M500,0L0,500v1800h600v500l500-500h400l900-900V0H500z M2200,1300l-400,400h-400l-350,350v-350H600V200h1600 V1300z"/>
                    <rect x="1700" y="550" class="logoPurple" width="200" height="600"/>
                    <rect x="1150" y="550" class="logoPurple" width="200" height="600"/>
                </g>
            </g>
        </g>
    </svg>
</span>
</div>

<div class="thumbails">
{% for streamer in data %}
    <div class="thumbail_box">
        <p>{{ streamer["user_name"] }}</p>
        <p class="streamTitle">{{ streamer["title"]|truncate(20, True) }}</p>
        <img src="{{ streamer['thumbnail_url'] }}">
    </div>
{% endfor %}
</div>
</body>
</html>